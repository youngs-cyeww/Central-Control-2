ä¸€ã€æ•´é«”ç’°å¢ƒè—åœ–ï¼ˆå…ˆå»ºç«‹æ­£ç¢ºå¿ƒæ™ºï¼‰
Windows
â”œâ”€ å®˜æ–¹ Pythonï¼ˆä¸æ˜¯ Condaï¼‰
â”‚   â””â”€ venvï¼ˆè™›æ“¬ç’°å¢ƒï¼‰
â”œâ”€ MySQL Serverï¼ˆç¨ç«‹å®‰è£ï¼‰
â”œâ”€ Mosquitto (MQTT Broker)
â””â”€ Central Control (Python ç¨‹å¼)


ğŸ“Œ é—œéµåŸå‰‡

âŒ ä¸æ·· Conda

âŒ ä¸æ·· pip / conda

âœ… ä¸€å€‹å°ˆæ¡ˆä¸€å€‹ venv

âœ… MySQL åªè·Ÿ Python æºé€šï¼Œä¸ç¢° ESP32

äºŒã€MySQL å®‰è£ï¼ˆåªåšä¸€æ¬¡ï¼‰
1ï¸âƒ£ ä¸‹è¼‰ MySQL Serverï¼ˆå®˜æ–¹ï¼‰

ç‰ˆæœ¬å»ºè­°ï¼šMySQL 8.0.x

å®‰è£æ™‚é¸ï¼š

âœ” MySQL Server

âœ” MySQL Command Line Client

âœ” MySQL Workbenchï¼ˆå¯æœ‰å¯ç„¡ï¼Œä½†å»ºè­°ï¼‰

è¨­å®šæ™‚æ³¨æ„

è¨˜ä½ root å¯†ç¢¼

Port ç”¨é è¨­ 3306

å­—å…ƒé›†é¸ utf8mb4

2ï¸âƒ£ ç¢ºèª MySQL æ­£å¸¸

æ‰“é–‹ MySQL Command Line Clientï¼Œè¼¸å…¥å¯†ç¢¼å¾Œï¼š

SHOW DATABASES;


å¦‚æœæœ‰çœ‹åˆ°æ¸…å–® â†’ MySQL OK âœ…

ä¸‰ã€å»ºç«‹ä½ çš„è³‡æ–™åº«çµæ§‹ï¼ˆä¸€æ¬¡æå®šï¼‰
CREATE DATABASE logistics CHARACTER SET utf8mb4;
USE logistics;

CREATE TABLE vehicles (
    id INT PRIMARY KEY,
    x INT,
    y INT,
    battery INT,
    status VARCHAR(20),
    last_seen TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE tasks (
    id INT AUTO_INCREMENT PRIMARY KEY,
    vehicle_id INT,
    target_x INT,
    target_y INT,
    done BOOLEAN DEFAULT 0
);


ğŸ“Œ last_seen ä¹‹å¾Œå¯ä»¥ç”¨ä¾†åˆ¤æ–·ã€Œè»Šè¼›é›¢ç·šã€

å››ã€Python ç’°å¢ƒæ¶è¨­ï¼ˆé‡é»ï¼Œé¿å…ä½ ä¹‹å‰ç‚¸æ‰ï¼‰
1ï¸âƒ£ å®‰è£ã€Œå®˜æ–¹ Pythonã€

åªå¾ python.org ä¸‹è¼‰

å®‰è£æ™‚ ä¸€å®šè¦å‹¾

â˜‘ Add Python to PATH


ç¢ºèªï¼š

python --version
pip --version

2ï¸âƒ£ å»ºç«‹è™›æ“¬ç’°å¢ƒï¼ˆå–ä»£ Condaï¼‰

åœ¨ä½ çš„å°ˆæ¡ˆè³‡æ–™å¤¾ï¼š

python -m venv cc_env
cc_env\Scripts\activate


ä½ æœƒçœ‹åˆ°ï¼š

(cc_env)


ğŸ“Œ åªè¦çœ‹åˆ°é€™å€‹ï¼Œå°±ä»£è¡¨ä½ æ˜¯å®‰å…¨çš„

3ï¸âƒ£ å®‰è£å¥—ä»¶ï¼ˆç©©å®šç‰ˆï¼‰
pip install paho-mqtt mysql-connector-python


æˆ–ç”¨ requirements.txtï¼š

pip install -r requirements.txt

äº”ã€MySQL èˆ‡ Python çš„æ­£ç¢ºé€£ç·šæ–¹å¼
1ï¸âƒ£ config.pyï¼ˆä½ å·²ç¶“æœ‰ï¼Œä½†æˆ‘å†æ¨™æº–åŒ–ä¸€æ¬¡ï¼‰
MYSQL_CONFIG = {
    "host": "127.0.0.1",
    "user": "root",
    "password": "ä½ çš„å¯†ç¢¼",
    "database": "logistics",
    "auth_plugin": "mysql_native_password"
}


ğŸ“Œ ç”¨ 127.0.0.1 æ¯” localhost ç©©
ğŸ“Œ auth_plugin å¯é¿å… 8.0 é©—è­‰å•é¡Œ

2ï¸âƒ£ database.pyï¼ˆå®‰å…¨å¯«æ³•ï¼‰
import mysql.connector
from mysql.connector import pooling
from config import MYSQL_CONFIG

pool = pooling.MySQLConnectionPool(
    pool_name="cc_pool",
    pool_size=5,
    **MYSQL_CONFIG
)

def get_conn():
    return pool.get_connection()

ä½¿ç”¨æ™‚ï¼ˆç¯„ä¾‹ï¼‰
def update_vehicle(...):
    conn = get_conn()
    cursor = conn.cursor(dictionary=True)
    cursor.execute(...)
    conn.commit()
    cursor.close()
    conn.close()


ğŸ“Œ é€£ç·šæ±  = ä¸æœƒé€£ä¸€é€£æ–·æ‰
